---
title: CodeStreamでのプルリクエストの管理
metaDescription: How to create and review pull requests with New Relic CodeStream.
translationType: machine
---

ほとんどの開発チームにとって、開発プロセスの最終ステップはプルリクエストです。チームがNew Relic CodeStreamのフィードバックリクエストを、エンドオブサイクルのPRベースのコードレビューの前触れではなく、その代わりとして使用することを決めたとしても、CodeStreamを使えば、そのワークフローのすべてをIDEの中で維持することができます。

## プルリクエストのワークフロー [#workflow]

CodeStreamのプルリクエストワークフローには4つの要素があります。以下の表は、それぞれの要素でどのコードホスティングサービスがサポートされているかを示しています。

| 機能                           | サポートサービス                                                                            |
| ---------------------------- | ----------------------------------------------------------------------------------- |
| プルリクエストの作成                   | GitHub, GitHub Enterprise, GitLab, GitLab Self-Managed, Bitbucket, Bitbucket Server |
| フォークを越えたプルリクエストの作成           | GitHub, GitHub Enterprise, GitLab, GitLab Self-Managed                              |
| プルリクエストのレビューと編集              | GitHub, GitHub Enterprise, GitLab, GitLab Self-Managed                              |
| プルリクエストのコメントをコードアノテーションとして表示 | GitHub、GitLab、Bitbucket                                                             |

## プルリクエストの作成 [#create]

いつでもプルリクエストを開くことができます。CodeStream ペインの上部にある **+** ボタン、または Pull Requests セクションのヘッダーにある **+** ボタンをクリックしてください。また、キーボードショートカット(`ctlr+shift+/` `p`, `ctrl+/` `p` (Macの場合), `m` (GitLabユーザーの場合))を使うこともできます。CodeStreamでは、プルリクエストを開く前に変更内容を確認するために、ツリービュー、リストビュー、diffビューのオプションが用意されています。

![プルリクエストの作成方法を示したスクリーンショット](/images/OpenPullRequest1.png "プルリクエストの作成")

ワンクリックで、最後のコミットメッセージ、ブランチ名、またはチケットを選択して作業を開始した場合はチケットタイトルに基づいてプルリクエストの名前を付けることができます。また、チケットを選択して作業を開始した場合は、チケットタイトルをプルリクエストの名前にすることができます。プルリクエストを提出する前に、フォームの下に表示されているファイルをクリックして、変更内容を確認することができます。

フォークをまたいでプルリクエストを作成するには、ページ上部の「 **compare across forks** 」リンクをクリックすると、フォームが更新され、ベースリポジトリとヘッドリポジトリの両方を選択できるようになります。

また、CodeStreamのフィードバックリクエストの中からプルリクエストを作成することもできます。フィードバックリクエストが承認されると、上部にプルリクエストを開くためのオプションが表示されます。

![フィードバックリクエストからPRを作成する方法を示すスクリーンショット](/images/OpenPRfromFR.png "フィードバックリクエスト")

プルリクエストを作成する前に、フィードバックリクエストに含まれていた変更がすべてコミットされ、プッシュされていることを確認してください。また、作業している機能ブランチにリモートトラッキングブランチがない場合は、プルリクエストを作成する際にそのブランチを設定するオプションが与えられます。

フィードバックリクエストからプルリクエストを作成すると、CodeStreamはフィードバックリクエストの中にプルリクエストへのリンクを追加することで、2つの点を結びつけます。

![フィードバックリクエストからPRにリンクする方法を示すスクリーンショット](/images/LinkToPullRequest.png "プルリクエストへのリンク")

プルリクエストの説明文に、誰がいつレビューを行ったかという情報とともに、フィードバックリクエストへのリンクを追加します。

![PRからのフィードバックリクエストにリンクする方法を示すスクリーンショット](/images/LinkToFeedbackRequest.png "フィードバックリクエストへのリンク")

## プルリクエストのレビュー [#review]

<Callout variant="caution">
  プルリクエストをレビューする機能は、現在Bitbucketでは利用できません。
</Callout>

プルリクエストがどこで作成されたかにかかわらず、CodeStreamの中で編集、レビュー、さらにはマージすることができます。CodeStreamはGitHubとGitLabをIDEに導入しているので、学習の必要はありません。GitHubやGitLabでプルリクエストを扱う方法を知っていれば、CodeStreamでも同じように扱うことができます。

GitHubのプルリクエストの詳細（レビュアー、アサイニー、ラベルなど）を編集できます。

![PRの詳細を示すスクリーンショット](/images/PRDetails-GH.png "プルリクエストの詳細")

GitLabのマージリクエストでは、編集モード（ページ上部のドロップダウンから）またはサイドバーを使用することができます。

![マージリクエストの詳細を示すスクリーンショット](/images/PRDetails-GL.png "マージリクエストの詳細")

デフォルトでは、GitLab マージリクエストには 1 人のレビュアーと 1 人のアサイニーしか追加できません。あなたの組織が複数のレビュアーとアサイニーをサポートしている場合は、CodeStream ペインの **Merge Requests** セクションの見出しにある歯車のメニューをクリックして、これを有効にしてください。

![PRに複数のユーザーを割り当てる方法を示した画面](/images/MultipleSetting-GL.png "マルチセッティング")

会話の内容を確認してコメントを追加したり、共同作業者を@メンションすることができます。

![リクエストでの会話を示すスクリーンショット](/images/PRConversation-GH.png "プルリクエストの会話")

変更点を確認し、コメントを追加し、レビューを投稿することができます。

!["changed files" PRの表示を示すスクリーンショット。](/images/PRChanges-GH.png "プルリクエストの変更")

CodeStreamは、いくつかの重要な点でGitHub/GitLabの経験を改善しています。GitHubやGitLabでは、変更点を一連のdiffハンクとしてしか見ることができません。CodeStreamにもそのような表示がありますが、ファイル全体の文脈の中で変更点を確認したい場合は、リストビューやツリービューを使うことができます。コメントしたいコードを選択し、 **Comment** ボタンをクリックします (または、コンテキストメニューから **Comment** を選択します)。

![PRでのコメント方法を示す画面](/images/PRComment-GH.png "プルリクエストコメント")

コメントの際には、1つのコメントを追加するか、レビューを開始するかを選択できます。

![レビュー開始の画面](/images/PRCommentForm-GH.png "プルリクエストレビュー")

CodeStreamでは、変更されていないコードの行にコメントを付けることができます。チェンジセットに含まれるコードだけでなく、差分に含まれるすべてのコード行を選択することができます。これらのコメントはプルリクエストに1つのコメントとして追加され、進行中のレビューには含まれません。

GitHubのプルリクエストやGitLabのマージリクエストのような強力な機能を、あなたのIDEで実現できます。

## プルリクエストコメントの活用 [#pr-comments]

プルリクエストが承認され、コードがマージされると、通常、プルリクエスト内のコメントはそれで終了します。コメントの中には長期的に価値のある有益な情報が含まれていることが多いのですが、それらが再び見られることはほとんどありません。CodeStreamは、コメントを参照しているコードブロックと一緒に表示することで、コメントに第二の人生を与えます。

![コメントが表示されるスクリーンショット](/images/PRComment-Gutter1.png "プルリクエストコメントガター")

プルリクエストのコメントをコードマークの注釈として表示するには、コードストリームペインの **コードマーク** セクションで、そのセクションの歯車アイコンをクリックし、 **Show comments from pull requests** をチェックします。最初にこのボックスをチェックしたときに、まだコードホスティングサービスで認証されていなければ、認証するように促されます。

![codemark設定メニューのスクリーンショット](/images/CodemarksSection-Settings.png "コードマーク設定")

マージされたPRからのコメントは、参照しているコードブロックの横に表示されます。関連するブランチにいる場合は、公開PRからのコメントも表示されます。たとえば、公開されている PR が feature/some-name ブランチを main ブランチにマージする要求である場合、feature/some-name ブランチか main ブランチをチェックアウトしていれば、その PR のコメントが表示されますが、他のブランチにいる場合は表示されません。

コードが進化すると、各コメントの位置が自動的に更新され、参照しているコードブロックにリンクした状態になります。

あるファイルのPRコメントは約30分ごとに更新されるため、新しいコメントがすぐに表示されない場合があります。IDEを再起動することで強制的に更新することができます。
