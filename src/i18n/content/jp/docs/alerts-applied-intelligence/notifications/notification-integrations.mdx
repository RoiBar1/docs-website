---
title: アラートとアプライド・インテリジェンス通知の統合
tags:
  - Alerts and applied intelligence
  - Applied intelligence
  - Incident Intelligence
  - Destinations
metaDescription: Alerts and applied intelligence notification integrations are specific services and platforms you can use to send notifications from New Relic.
translationType: machine
---

import jiraDestination from 'images/jira_destination.png'

import jiraTemplate from 'images/jira-template.png'

import serviceNowDestination from 'images/serviceNow_destination.png'

import serviceNowMessageTemplate from 'images/serviceNow_message-template.png'

import slackDestinationAuthentication from 'images/slack_destination-authentication.png'

import slackSignIn from 'images/slack-sign-in.png'

import slackDestinationAllowAccess from 'images/slack_destination_allow_access.png'

import slackAuthenticationCompleted from 'images/slack_authentication_completed.png'

import slackMessageTemplateUserNotAuthenticated from 'images/slack_message-template-user-not-authenticated.png'

import slackChannelTestNotification from 'images/slack_channel-test-notification.png'

import webhookPreviewError from 'images/webhook-preview-error.png'

import webhookNotificationTemplate from 'images/webhook-notification-template.png'

import emailSettings from 'images/email_settings.png'

アラートとアプライド・インテリジェンスの通知統合は、New Relic からの通知を送信するために使用できる特定のサービスとプラットフォームです。

## 統合内容 [#detail]

それぞれの具体的な通知機能の統合についてはこちらをご覧ください。

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="jira"
    title="アトラシアン Jira"
  >
    **New RelicとAtlassian Jira(Cloud)を統合し、Jiraの課題を自動的に作成、更新、クローズすることができます。**

    <Video
      type="wistia"
      id="vp5rigddko"
    />

    ## アクセス権限 [#jira-permissions]

    Jira `API-Token` からの必要なパーミッションは、 `create`, `edit`, `close` tickets です。

    双方向の同期トグルを有効にするには、提供された Jira `API-Key` に `Admin` のロールが必要です。

    ## Jiraのデスティネーションを設定する [#set-up-jira]

    Jiraの課題を作成し、JiraとNew Relicが更新情報を共有し、同期をとるようにします。

    Jiraのデスティネーションを作成するには、以下の情報を入力します。

    * **デスティネーション名：** デスティネーションを識別するためのカスタム名。

    * **Jiraアカウントのエンドポイント：** 送信先のURLです。

    * **User-name:** 接続を行うユーザーの電子メールアドレスです。

    * **API トークン：** アトラシアンアカウントから生成されたものです。

      <Callout variant="important">
        New Relic は現在、 [Atlassian-Jira Classic (企業が管理する)プロジェクトをサポートしています。](https://support.atlassian.com/jira-software-cloud/docs/what-are-team-managed-and-company-managed-projects/).
      </Callout>

      宛先を保存する前に、 **Test connection** ボタンを使って接続をテストすることをお勧めします。

      <img
        src={jiraDestination}
        title="Jiraのデスティネーション設定。"
        alt="Jiraのデスティネーション設定のスクリーンショットです。"
      />

      ### 2ウェイ・シンク [#jira-two-way]

    * **New Relic課題のクローズ：** JIRA課題のステータスがdoneに変わった時に発生します。

    * **Acknowledgment of New Relic Issue:** JIRA の課題の状態が進行中に変わったときにトリガーされます。Jira との双方向統合を有効にして、課題の状態を New Relic の対応する状態と同期させることができます。双方向の同期を有効にするには、双方向統合のトグルをオンにします。

      オンにすると、選択したプロジェクトについて、後の段階で Jira アカウントに [Jira Webhook](https://developer.atlassian.com/server/jira/platform/webhooks/) が作成されます。Webhook には、New Relic へのアクセス詳細 (URL および API キー) が含まれます。

      ## メッセージテンプレートの設定 [#configure-jira-message-template]

      Jira課題のテンプレートを設定するには、以下の手順で行います。

    1. デスティネーションを選択します。この段階で新しい目的地を作ることができます。

    2. 接続先への接続が成功したら、プロジェクトを選択し、使用したいJiraの課題タイプを選択します。

    3. 課題タイプが選択されると、設定されたプロジェクトのフィールドがアカウントから取得され、Jiraインスタンスに自動的にマッピングされます。

       お客様にご利用いただくために、必須項目、推奨項目、値を自動的に入力しています。必須項目は必ず値を設定してください。任意のフィールドは、その右側にある `X` マークを使って、追加または削除することができます。

       <img
         src={jiraTemplate}
         title="Jira固有のカスタム変数メニューです。"
         alt="Jira固有のカスタム変数メニューのスクリーンショットです。"
       />

       <figcaption>
         Jiraのメッセージテンプレートです。
       </figcaption>

       ## テスト通知の送信 [#send-jira-test]

       デフォルトのフィールド値でテスト通知をクリックすると、JIRA課題がどのように表示されるかを確認できます。

       成功すると、JIRAの課題が作成され、リンクが表示されます。
  </Collapser>

  <Collapser
    className="freq-link"
    id="servicenow"
    title="ServiceNow（インシデント・マネジメント）"
  >
    **New RelicとServiceNow Incident-Managementを統合し、ServiceNowのインシデントを自動的に作成、更新、解決することができます。**

    <Video
      type="wistia"
      id="6or6n8am4k"
    />

    ## 役割 [#roles-servicenow]

    統合の一環として、ServiceNowのインシデントテーブルからフィールドを取得し、その他のオプション値も取得します。以下のパーミッションが必要です。

    * `sys_dictionary`, `sys_choice`, `sys_user`, and `task` のテーブルに対する読み取り権限を持つ。

    * Read/Write permission to `incident`.

    * `caller` カラムのユーザーを取得するには、 `sys_users` テーブルの読み取りパーミッションが必要です。

      ロール `personalize_choices`, `personalize_dictionary`, `rest_service`, `itil` は、上記のパーミッションを持っています。

      双方向の統合を可能にするためには、 `api_key_credentials` テーブルに対する読み取り/書き込み権限が必要です。 `credentials_admin` と `discovery_admin` のロールがこれを提供します。

      ## デスティネーションの設定 [#set-up-service-destination]

      ServiceNowのデスティネーションを作成するには、以下の情報を入力します。

    * **デスティネーション名：** デスティネーションを識別するためのカスタム名。

    * **ドメイン：** 送信先のURLです。

    * **User-name:** ユーザーの名前です。

    * **パスワード：** ユーザーのパスワードです。

      デスティネーションを保存する前に、 **Test connection** ボタンをクリックして、接続をテストすることをお勧めします。

      <img
        src={serviceNowDestination}
        title="ServiceNowのデスティネーション設定。"
        alt="ServiceNowのデスティネーションの設定画面です。"
      />

      ### 2ウェイ・シンク [#two-way-servicenow]

    * **New Relic課題の解決：** Servicnowのインシデントの状態が解決済みに変更されたときに発生します。

    * **Acknowledgment of New Relic Issue：** Servicnowのインシデントの状態がin-progressに変更されたときに発生します。

      双方向の統合を設定するには

    1. `2ウェイ統合` トグルをオンにします。

    2. この <a href="https://storage.googleapis.com/newrelic-notifications/snow-two-way-sync/Newrelic-Snow-Sync-Configurations.xml" download="NewRelic-SNow-Sync-Configurations.xml">XML ファイル</a> を開いてダウンロードすると、ビジネスルールのトリガーとなるイベントが New Relic One に戻ってきます。

    3. ServiceNowのサイドバーメニューで、 **System Definition> Business Rules** を選択します。

    4. いずれかのコラムヘッダーのメニューアイコンをクリックし、 **Import XML** を選択し、ダウンロードしたXMLファイルをアップロードします。

       宛先が保存されると、New Relic の API-Key が `api_key_credentials` に保存されます。このキーは、New Relic へのコールバック REST 呼び出しの一部としてヘッダーで送信されます。

       ## メッセージテンプレートの設定 [#configure-servicenow-message-template]

       接続が成功すると、ServiceNowのインシデントテーブルのカラムがアカウントから取得され、自動的にServiceNowインスタンスにマッピングされます。

       お客様にご利用いただくために、必須項目、推奨項目、値を自動的に入力しています。必須項目は必ず値を設定してください。任意のフィールドは、その右側にある `X` マークを使って、追加または削除することができます。

       <img
         src={serviceNowMessageTemplate}
         title="ServiceNowのインシデントテンプレートです。"
         alt="推奨されるServiceNow-incidentのフィールドと値のスクリーンショットです。"
       />

       <figcaption>
         ServiceNow-Incidentテンプレートのフィールドを選択、編集または削除します。
       </figcaption>

       ## テスト通知の送信 [#send-servicenow-test]

       **Test notification** をクリックすると、デフォルトのフィールド値を持つServiceNowインシデントが表示されます。成功すると、インシデントが作成され、リンクが表示されます。
  </Collapser>

  <Collapser
    className="freq-link"
    id="slack"
    title="スラック"
  >
    **Slackのチャンネルに通知メッセージを送信します。**

    <Video
      type="wistia"
      id="3ypdkpd7zg"
    />

    ## 前提条件 [#slack-prereqs]

    Slack ワークスペースには、 [New Relic アプリケーション](https://newrelic.slack.com/apps/AP92KQJS3-new-relic?tab=more_info) がインストールされている必要があります。このアプリケーションをユーザーが個別にインストールするには、ワークスペースの管理者による承認が必要です。

    ## Slackの宛先を設定する [#set-slack-destination]

    **ワンクリックSlack認証** をクリックしてSlackのランディングページに移動し、OAuth2認証プロセスを続行します。必要なワークスペースにサインインしていない場合は、Slack にリダイレクトされてサインインします。

    <img
      src={slackDestinationAuthentication}
      title="ワンクリックでSlackの宛先を作成。"
      alt="ワンクリックSlack認証の画面。"
    />

    ワークスペース名を追加するか、関連するワークスペースを選択して、 **「続ける」** をクリックします。

    <img
      src={slackSignIn}
      title="slackのワークスペースを追加します。"
      alt="ワークスペースを追加します。"
    />

    選択したワークスペースにサインインしている場合、New Relic が指定されたアクションを実行することを許可します。

    <img
      src={slackDestinationAllowAccess}
      title="ワークスペースを選択し、権限を設定します。"
      alt="スクリーンショット許可の設定。"
    />

    **Allow** をクリックすると、目的のページに戻ります。

    <img
      src={slackAuthenticationCompleted}
      title="の認証が正常に完了しました。"
      alt="スクリーンショットで認証が完了しました。"
    />

    ## Slackのメッセージ設定 [#configure-slack-message-settings]

    宛先（ワークスペース）と、メッセージを送信するslackチャンネルを選択します。必要なワークスペースにあらかじめ定義された送信先がない場合は、新しい送信先を作成することができます。なお、プライバシー保護のため、プライベート・チャンネルを選択するには、ユーザーが一度認証を受ける必要があります。

    <img
      src={slackMessageTemplateUserNotAuthenticated}
      title="プライベートチャンネルを選択するためには、認証が必要です。"
      alt="Slackの設定で、ユーザーが認証されていません。"
    />

    ### テスト通知の送信 [#send-slack-test]

    あらかじめ定義された例のペイロードを持つテスト通知をチャンネルに送信することができます。これにより、選択したslackチャンネルにメッセージが作成されます。

    <img
      src={slackChannelTestNotification}
      title="Slackの設定が正常にテストされました。"
      alt="Slackの設定画面です。"
    />
  </Collapser>

  <Collapser
    className="freq-link"
    id="webhook"
    title="Webhook"
  >
    **Webhook Notifierを使って、任意のエンドポイントに通知メッセージを送信します。**

    <Video
      type="wistia"
      id="feyutwgew8"
    />

    ## Webhookの宛先を設定する [#set-webhook-destination]

    Webhookの宛先を作成するには、以下のものが必要です。

    * **デスティネーション名：** 固有のデスティネーション名。

    * **URLです。** 対象となるアプリケーションのエンドポイントで、必要に応じて認証やカスタムヘッダーも含まれます。

    * **Authorization mechanism (_Optional_):**. `ベーシック認証` または `ベアラートークン` とすることができます。

      ## Webhookイベントテンプレートの設定 [#configure-webhook-event-template]

      Webhookの宛先をリストから選び、 `HTTP-POST` リクエストを設定します。

      リクエスト設定では、以下のことが求められます。

    1. テンプレートの名前を設定します。

    2. あらかじめ設定されている目的地を目的地リストから選択するか、新しい目的地を作成します。

    3. カスタムヘッダーの追加（オプション）。

    4. リクエストのペイロードを設定します。

       ## Webhookペイロードのカスタマイズ [#customize-webhook-payload]

       デフォルトのペイロードを使用することも、必要なデータを含むようにカスタマイズすることもできます。 [variablesメニュー](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) から変数を選び、 [handlebars構文](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) を適用して、Webhookを充実させます。

       リクエストのcontent-typeはデフォルトでJSONであることに注意してください。したがって、ペイロードはJSONである必要があります。 [使用例](/docs/alerts-applied-intelligence/notifications/message-templates/#usage-examples) を参照してください。

       右側の **プレビュー** セクションには、テンプレートがレンダリングされた後に予想されるペイロードが表示されます。ペイロードが有効なJSONを形成していない場合は、エラーが表示され、テンプレートを保存することはできません。

       <img
         src={webhookPreviewError}
         title="無効なJsonペイロードです。"
         alt="無効なJsonペイロードのスクリーンショットです。"
       />

       Webhookペイロードが有効なJSONに適合していれば、定義したWebhook宛先にテスト通知を送信できます。

       <img
         src={webhookNotificationTemplate}
         title="テスト用のWebhook通知テンプレートです。"
         alt="テスト用のWebhook通知テンプレートのスクリーンショットです。"
       />

       テスト通知を送信して、すべてが正しく接続されていることを確認することをお勧めします。
  </Collapser>

  <Collapser
    className="freq-link"
    id="email"
    title="メール"
  >
    **ユーザーへのメール通知**

    ## メール送信先の設定 [#set-email-destination]

    メールの送信先を手動で作成する必要はありません。ワークフローの起動時や更新時に自動的にメール送信先が作成されます。

    ## メール設定 [#configure-email-settings]

    1人または複数の受信者を追加します。

    * New Relic アカウントを持つユーザーは、名前やメールアドレスを検索する際にオートコンプリートで見つけることができます。

    * New Relic アカウントやメール配信リストを持っていないユーザーを追加するには、そのユーザーの完全なメールアドレスを入力します。

      すべての受信者は、宛先に変換されます。送信先ごとのメール通知は、 [notifications-log](/docs/alerts-applied-intelligence/notifications/destinations/#notifications-log) で確認できます。

      <img
        src={emailSettings}
        title="メール設定"
        alt="メール設定の画面です。"
      />

      ### テスト通知の送信 [#email-test]

      テスト通知を送信して、メール通知が受信箱に届くことを確認します。
  </Collapser>

  <Collapser
    className="freq-link"
    id="pagerduty"
    title="PagerDuty"
  >
    **New Relic と PagerDuty を統合することで、インシデントを自動的に作成・更新し、New Relic から送信された課題に基づいてオンコール対応者に通知することができます。**

    ## PagerDutyの統合 [#pagerduty-integrate]

    New Relic では、PagerDuty との統合に 2 つの方法があります。

    * **[REST API キーを使用したアカウントレベルの統合（推奨）](#pagerduty-ali)** : この統合は双方向の同期をサポートし、単一の New Relic デスティネーションに複数の PagerDuty サービスを定義することができます。

    * **[EVENTS API キーを使用したサービスレベル統合](#pagerduty-sli)** : このシングルサービス統合は、サービスレベル統合キーを使用しており、固有の PagerDuty サービスごとに個別の New Relic デスティネーションが必要となります。

      ### アカウントレベルの統合（推奨） [#pagerduty-ali]

      この統合には、以下のアクションを実行する権限が必要です。

    * [リストサービス](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE5Ng-list-services)

    * [インテグレーションの作成](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIwMw-create-a-new-integration)

    * [Webhookサブスクリプションの作成](https://developer.pagerduty.com/api-reference/b3A6MjkyNDc4NA-create-a-webhook-subscription)

    * [ノートの作成](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE1MA-create-a-note-on-an-incident)

    * [リストチーム](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIyMw-list-teams)

    * [ユーザー一覧](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIzMw-list-users)

      この統合には、REST API キーが必要です。PagerDuty には 2 種類の REST API キーがあります。

    * [一般アクセスキー](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-general-access-rest-api-key): 上記のすべての権限が含まれており、PagerDutyの管理者とアカウント所有者が取得できます。 [PagerDutyの説明書をご覧ください](https://support.pagerduty.com/docs/api-access-keys#generate-a-general-access-rest-api-key).

    * [パーソナルユーザートークン](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-personal-rest-api-key): お客様のアカウントに高度な権限がある場合、固有のパーソナルREST APIキーを作成することができます。個人用REST APIキーを使用して行われたリクエストは、ユーザーのパーミッションに制限されます。ユーザートークンAPIキーを提供することを選択した場合、それが上記の必要なパーミッションを持っていることを確認してください。 [PagerDutyの説明書をご覧ください](https://support.pagerduty.com/docs/api-access-keys#generate-a-user-token-rest-api-key).

      ### サービスレベルの統合 [#pagerduty-sli]

      Events API は、すべてのお客様にご利用いただけます。また、Manager ロール以上のユーザーであれば、統合キーを生成することができます。 [PagerDuty の説明書をご覧ください](https://support.pagerduty.com/docs/api-access-keys#events-api-keys) 。

      ## デスティネーションの設定 [#set-up-pagerduty]

      PagerDuty のデスティネーションを作成するには、Integration method タブで以下の情報を入力します。

    * **Name**: 目的地を特定するためのカスタム名。

    * **API キー**: アカウントレベルの統合の場合、PagerDuty から [General](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-general-access-rest-api-key) または [Personal](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-personal-rest-api-key) API キーを貼り付けるか、サービスレベルの統合キーを貼り付けます。

      ### 双方向の統合同期 [#two-way-pagerduty]

      アカウントレベルの統合を使用している場合は、PagerDuty のインシデントとの双方向の統合を構成し、インシデントの状態 (確認/解決) が更新されると、対応する New Relic の課題の状態も更新 (確認/クローズ) されるようにします。

      デスティネーションを保存する前に、 **Test connection** ボタンをクリックして、接続をテストすることをお勧めします。

      ## メッセージテンプレートの設定 [#message-pagerduty]

      メッセージテンプレートを設定するには

    1. 通知したいPagerDutyの宛先を選択します。
    2. API Keyを使ったアカウント統合の場合

    * 接続が成功すると、PagerDutyのサービスがあなたのアカウントから取得されます。
    * 統合したいPagerDutyのサービスを選択します。
    * PagerDutyでノートを投稿するユーザーを選択します。Personal APIは、API Keyを生成したユーザーに限定されます）。

    3. PagerDutyで受け取るサマリーをカスタマイズできます。

    4. PagerDuty のカスタム詳細セクションには、New Relic の課題から事前に定義された値が自動的に入力されます。

       ## テスト通知の送信 [#test-notification-pagerduty]

       あらかじめ定義されたペイロード例を持つテスト通知をチャネルから送信することができます。これにより、PagerDutyにインシデントが発生します。
  </Collapser>
</CollapserGroup>
